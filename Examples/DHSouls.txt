^1^T^SPoint^T ^Sy^F-5192386399538257 ^f-44^Sx ^F8345493292473384^f-68 ^t^SScale^N0.816 ^SEnabledSpecs^T ^N577^b ^t^SGUID^STMW:group:1QwhkGILy9bW ^SColumns^N5 ^SIcons^T ^N1^T ^SType^Sconditionicon ^SEvents^T ^N1^T ^SType^SLua ^SLua^Slocal~`icon~`=~`...~J ~J if~`TMW.hasSoulFragCounter~`then~`return~`end~J TMW.hasSoulFragCounter~`=~`true~J icon.env_aura~`=~`{};~J local~`aura_env=~`icon.env_aura~J aura_env.fragment_counter~`=~`0;~J local~`counter_name~`=~`"soul_frags";~J ~J TMW_ST:InitCounter(counter_name,~`aura_env.fragment_counter)~J ~J local~`DogTag~`=~`LibStub("LibDogTag-3.0",~`true)~J if~`DogTag~`then~J ~`~`~`~`DogTag:AddTag("TMW",~`"SoulFragments",~`{~J ~`~`~`~`~`~`~`~`~`~`~`~`code~`=~`function()~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`return~`aura_env.fragment_counter~J ~`~`~`~`~`~`~`~`~`~`~`~`end,~J ~`~`~`~`~`~`~`~`~`~`~`~`arg~`=~`{},~J ~`~`~`~`~`~`~`~`~`~`~`~`ret~`=~`"number",~J ~`~`~`~`~`~`~`~`~`~`~`~`doc~`=~`"Return~`number~`of~`available~`fragments",~J ~`~`~`~`~`~`~`~`~`~`~`~`example~`=~`'[SoulFragments]~`=>~`"3"',~J ~`~`~`~`~`~`~`~`~`~`~`~`events~`=~`"TMW_COUNTER_MODIFIED",~J ~`~`~`~`~`~`~`~`~`~`~`~`category~`=~`"Userland"~J ~`~`~`~`})~J end~J ~J function~`VengenceGetFragmentCounter()~J ~`~`~`~`return~`~`aura_env.fragment_counter~J end~J ~J ~J LibStub("AceEvent-3.0"):Embed(aura_env);~J ~J function~`aura_env:COMBAT_LOG_EVENT_UNFILTERED(event,...)~`~`~J ~`~`~`~`_2~`~`=~`select(2,...)~J ~`~`~`~`_4~`~`=~`select(4,...)~J ~`~`~`~`_8~`~`=~`select(8,...)~J ~`~`~`~`_12~`=~`select(12,...)~J ~`~`~`~`~J ~`~`~`~`me~`~`=~`UnitGUID("player")~J ~`~`~`~`~J ~`~`~`~`~J ~`~`~`~`if~`_2~`==~`"UNIT_DIED"~`and~`_8~`==~`me~`then~J ~`~`~`~`~`~`~`~`aura_env.fragment_counter~`=~`0~J ~`~`~`~`end~J ~`~`~`~`~J ~`~`~`~`if~`_2~`==~`"SPELL_CAST_SUCCESS"~`and~`_4~`==~`me~`and~`_12~`==~`204255~`then~J ~`~`~`~`~`~`~`~`aura_env.fragment_counter~`=~`aura_env.fragment_counter~`+~`1~J ~`~`~`~`end~J ~`~`~`~`~J ~`~`~`~`if~`_2~`==~`"SPELL_HEAL"~`and~`_4~`==~`me~`and~`_12~`==~`203794~`then~J ~`~`~`~`~`~`~`~`buffStacks~`=~`GetSpellCount(228477)~`or~`0~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`buffStacks~`<~`aura_env.fragment_counter~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`aura_env.fragment_counter~`=~`buffStacks~`~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`end~J ~`~`~`~`~J ~`~`~`~`~J ~`~`~`~`if~`(_2~`==~`"SPELL_AURA_APPLIED_DOSE"~`or~`_2~`==~`"SPELL_AURA_APPLIED")~`and~`_4~`==~`me~`and~`_12~`==~`203981~`then~J ~`~`~`~`~`~`~`~`buffStacks~`=~`GetSpellCount(228477)~`or~`0~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`buffStacks~`>~`aura_env.fragment_counter~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`aura_env.fragment_counter~`=~`buffStacks~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`end~J ~`~`~`~`~J ~`~`~`~`if~`_2~`==~`"SPELL_AURA_REMOVED_DOSE"~`and~`_4~`==~`me~`and~`_12~`==~`203981~`then~J ~`~`~`~`~`~`~`~`aura_env.fragment_counter~`=~`aura_env.fragment_counter~`-~`1~`~`~`~`~`~`~`~`~J ~`~`~`~`end~J ~`~`~`~`~J ~`~`~`~`if~`_2~`==~`"SPELL_AURA_REMOVED"~`and~`_4~`==~`me~`and~`_12~`==~`203981~`then~J ~`~`~`~`~`~`~`~`aura_env.fragment_counter~`=~`0~`~`~`~`~`~`~`~J ~`~`~`~`end~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~J ~`~`~`~`TMW_ST:UpdateCounter(counter_name,~`~`aura_env.fragment_counter)~J ~`~`~`~`~J ~`~`~`~`return~`true~J end~`~J ~J aura_env:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED")~J ~J ~J ~J  ^SEvent^SOnEventsRestored ^t^Sn^N1 ^t^SCustomTex^S215393 ^SStates^T ^N1^T ^t^N2^T ^SAlpha^N0.2 ^t^N3^T ^t^N4^T ^t^t^SEnabled^B ^SConditions^T ^N1^T ^SType^SCOUNTER ^SOperator^S> ^SName^Ssoul_frags ^t^Sn^N1 ^t^t^N2^T ^SType^Sconditionicon ^SConditions^T ^N1^T ^SType^SCOUNTER ^SOperator^S> ^SLevel^N1 ^SName^Ssoul_frags ^t^Sn^N1 ^t^SCustomTex^S215393 ^SStates^T ^N1^T ^t^N2^T ^SAlpha^N0.2 ^t^N3^T ^t^N4^T ^t^t^SEnabled^B ^t^N3^T ^SType^Sconditionicon ^SConditions^T ^N1^T ^SType^SCOUNTER ^SOperator^S> ^SLevel^N2 ^SName^Ssoul_frags ^t^Sn^N1 ^t^SCustomTex^S215393 ^SStates^T ^N1^T ^t^N2^T ^SAlpha^N0.2 ^t^N3^T ^t^N4^T ^t^t^SEnabled^B ^t^N4^T ^SType^Sconditionicon ^SConditions^T ^N1^T ^SType^SCOUNTER ^SOperator^S> ^SLevel^N3 ^SName^Ssoul_frags ^t^Sn^N1 ^t^SCustomTex^S215393 ^SStates^T ^N1^T ^t^N2^T ^SAlpha^N0.2 ^t^N3^T ^t^N4^T ^t^t^SEnabled^B ^t^N5^T ^SType^Sconditionicon ^SConditions^T ^N1^T ^SType^SCOUNTER ^SOperator^S> ^SLevel^N4 ^SName^Ssoul_frags ^t^Sn^N1 ^t^SCustomTex^S215393 ^SStates^T ^N1^T ^t^N2^T ^SAlpha^N0.2 ^t^N3^T ^t^N4^T ^t^t^SEnabled^B ^t^N6^T ^SStates^T ^N1^T ^t^N3^T ^t^N4^T ^t^t^t^N16^T ^SStates^T ^N1^T ^t^N3^T ^t^N4^T ^t^t^t^N11^T ^SStates^T ^N1^T ^t^N3^T ^t^N4^T ^t^t^t^t^SName^SSoul~`Fragments ^SSettingsPerView^T ^Sicon^T ^SSpacingX^N11 ^t^t^t^N84305^S~`~| ^Sgroup^N21 ^^