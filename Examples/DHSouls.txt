^1^T^SStackMinEnabled^B ^SType^Sconditionicon ^SConditions^T ^N1^T ^SType^SCOUNTER ^SOperator^S> ^SName^Sx_dh_souls ^t^Sn^N1 ^t^SStackMin^N1 ^SName^SSpirit~`Bomb ^SEvents^T ^N1^T ^SType^SLua ^SLua^S--~`<dh~`soul~`counter>~J ~J local~`aura_env~`=~`{souls~`=~`0}~J local~`name~`=~`'x_dh_souls'~J TMW_ST:InitCounter(name,~`0)~J ~J TMW_ST:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED",~`function~`()~J ~`~`~`~`~`~`~`~`local~`data~`=~`{CombatLogGetCurrentEventInfo()}~J ~`~`~`~`~`~`~`~`_2~`~`=~`data[2]~J ~`~`~`~`~`~`~`~`_4~`~`=~`data[4]~J ~`~`~`~`~`~`~`~`_8~`~`=~`data[8]~J ~`~`~`~`~`~`~`~`_12~`=~`data[12]~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`me~`~`=~`UnitGUID("player")~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`local~`current~`=~`aura_env.souls~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`_2~`==~`"UNIT_DIED"~`and~`_8~`==~`me~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`aura_env.souls~`=~`0~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`_2~`==~`"SPELL_CAST_SUCCESS"~`and~`_4~`==~`me~`and~`_12~`==~`204255~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`aura_env.souls~`=~`aura_env.souls~`+~`1~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`_2~`==~`"SPELL_HEAL"~`and~`_4~`==~`me~`and~`_12~`==~`203794~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`buffStacks~`=~`GetSpellCount(228477)~`or~`0~J ~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~`~`~`~`if~`buffStacks~`<~`aura_env.souls~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`aura_env.souls~`=~`buffStacks~`~J ~`~`~`~`~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`(_2~`==~`"SPELL_AURA_APPLIED_DOSE"~`or~`_2~`==~`"SPELL_AURA_APPLIED")~J ~`~`~`~`~`~`~`~`and~`_4~`==~`me~`and~`_12~`==~`203981~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`buffStacks~`=~`GetSpellCount(228477)~`or~`0~J ~`~`~`~`~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~`~`~`~`if~`buffStacks~`>~`aura_env.souls~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`aura_env.souls~`=~`buffStacks~J ~`~`~`~`~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`_2~`==~`"SPELL_AURA_REMOVED_DOSE"~`and~`_4~`==~`me~`and~`_12~`==~`203981~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`aura_env.souls~`=~`aura_env.souls~`-~`1~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`_2~`==~`"SPELL_AURA_REMOVED"~`and~`_4~`==~`me~`and~`_12~`==~`203981~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`aura_env.souls~`=~`0~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`end~`~`~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`(aura_env.souls~`~|=~`current)~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter(name,~`aura_env.souls)~J ~`~`~`~`~`~`~`~`end~J end) ^SEvent^SOnEventsRestored ^t^Sn^N1 ^t^SEnabled^B ^SOnlyActvtnOverlay^B ^SSettingsPerView^T ^Sicon^T ^STextLayout^STMW:textlayout:1OBCzG7djbEH ^STexts^T ^N1^S[Counter('x_dh_souls'):Hide(0)] ^N2^S ^t^t^t^SCustomTex^S203981 ^t^N100200^S~`~| ^Sicon^^

^1 ^T^N1^T ^SStringName^SNumber ^SConstrainWidth^b ^t^N2^T ^SAnchors^T ^N1^T ^Sy^N5 ^Spoint^STOPLEFT ^SrelativePoint^STOPLEFT ^t^t^SSize^N10 ^t^SGUID^STMW:textlayout:1OBCzG7djbEH ^Sn^N2 ^SName^SCenter~`Timer ^t^N100200^S~`~| ^Stextlayout^STMW:textlayout:1OBCzG7djbEH ^^