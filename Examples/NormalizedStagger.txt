^1^T^SType^Sdynamicbar ^SPowerType^N3 ^SGUID^STMW:icon:1Qz9m26W=gH4 ^SEvents^T ^N1^T ^SType^SLua ^SLua^Slocal~`icon~`=~`...~J ~J --Your~`code~`goes~`here:~J ~J local~`stagger=0~J local~`normalized=0~J local~`~`health~`=0~J local~`tick~`=~`0~J local~`color~`=~`""~J ~J function~`getColor(next_tick,~`health)~J ~`~`~`~`local~`perc~`=~`next_tick/health~J ~`~`~`~`if~`perc~`<=~`.015~`then~J ~`~`~`~`~`~`~`~`return~`'#ffa9a9a9'~J ~`~`~`~`elseif~`perc~`<=~`.03~`then~J ~`~`~`~`~`~`~`~`return~`'#ffe3df24'~J ~`~`~`~`elseif~`perc~`<=~`.05~`then~J ~`~`~`~`~`~`~`~`return~`'#ffe39723'~J ~`~`~`~`elseif~`perc~`<=~`.1~`then~J ~`~`~`~`~`~`~`~`return~`'#fffd1300'~J ~`~`~`~`else~J ~`~`~`~`~`~`~`~`return~`'#fffd00b2'~J ~`~`~`~`end~J end~J ~J ~J icon:registerTriggerFunction(function()~J ~`~`~`~`~`~`~`~`local~`next_stagger,~`next_normalized,~`next_health,~`next_tick,~`next_color~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`not~`BrewmasterTools~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`next_normalized~`=~`UnitStagger'player'~J ~`~`~`~`~`~`~`~`~`~`~`~`next_tick~`=~`next_normalized~J ~`~`~`~`~`~`~`~`else~J ~`~`~`~`~`~`~`~`~`~`~`~`next_normalized~`=~`BrewmasterTools.GetNormalStagger()~J ~`~`~`~`~`~`~`~`~`~`~`~`next_tick~`=~`BrewmasterTools.GetNextTick()~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`next_health~`~`=~`UnitHealthMax'player'~`~`~`~`~J ~`~`~`~`~`~`~`~`next_stagger~`=~`UnitStagger'player'~J ~`~`~`~`~`~`~`~`next_color~`~`~`=~`getColor(next_tick,~`next_health)~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`(next_health~`==~`health~`and~`next_stagger~`==~`stagger~`and~`next_normalized~`==~`normalized~`and~`next_tick~`==~`tick~`and~`next_color~`==~`color)~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`return~`false~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`icon:setMaxValue(next_normalized)~J ~`~`~`~`~`~`~`~`icon:setCurrentValue(next_stagger)~J ~`~`~`~`~`~`~`~`TMW_ST:SetScriptText("StaggerText",("%.1f"):format(100~`*~`next_tick/next_health))~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`stagger~`=~`next_stagger~J ~`~`~`~`~`~`~`~`normalized~`=~`next_normalized~J ~`~`~`~`~`~`~`~`health~`=~`next_health~J ~`~`~`~`~`~`~`~`tick~`=~`next_tick~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`(next_color~`~|=~`color)~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`icon:setBarColors(next_color,~`next_color,~`next_color)~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`return~`true~J end)~`~`~`~`~J ~J ~J ~J  ^SEvent^SOnEventsRestored ^t^Sn^N1 ^t^SSettingsPerView^T ^Sbar^T ^STexts^T ^N1^S ^N2^S[ST_GetScriptText("StaggerText")]% ^t^t^t^SCustomTex^SNONE ^SStates^T ^N1^T ^t^N3^T ^t^N4^T ^t^N102^T ^SAlpha^N0.1 ^t^t^SEnabled^B ^t^N84305^S~`~| ^Sicon^^