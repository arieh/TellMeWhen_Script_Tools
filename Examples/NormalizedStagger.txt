This bar will track normalized stagger, as described in https://mods.curse.com/addons/wow/258800-brewmastertools. 
In addition to providing the same baseline as the WA, it will also glow when you need to purify (based on the WA recommendation). 
Lastly, it provides the following counters for your customizations:
1. next_stagger - the value of the next stagger tick
2. stagger_level - stagger severety level - ranging from 1 to 5 (corresponds to stagger colors)
3. stagger_progress - this is the ratio between the next stagger tick to the normalized stagger. This corresponds to the bar's fill status. 
==================


^1^T^SType^Sdynamicbar ^SPowerType^N3 ^SSettingsPerView^T ^Sbar^T ^STexts^T ^N1^S ^N2^S[(Counter("next_stagger")~`*~`100):Round(2)]% ^t^t^t^SCustomTex^S115069 ^SStates^T ^N1^T ^t^N3^T ^t^N4^T ^t^t^SEnabled^B ^SEvents^T ^N1^T ^SType^SLua ^SLua^S--~`Normalized~`Stagger~J local~`icon~`=~`...~J ~J --Your~`code~`goes~`here:~J ~J local~`stagger=0~J local~`normalized=0~J local~`~`health~`=0~J local~`tick~`=~`0~J local~`color~`=~`""~J ~J TMW_ST:InitCounter("next_stagger",~`0)~J TMW_ST:InitCounter("stagger_level",~`0)~J TMW_ST:InitCounter("stagger_progress",~`0)~J ~J function~`getColor(next_tick,~`health)~J ~`~`~`~`local~`perc~`=~`next_tick/health~J ~`~`~`~`if~`perc~`<=~`.015~`then~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`1)~J ~`~`~`~`~`~`~`~`return~`'#ffa9a9a9'~J ~`~`~`~`elseif~`perc~`<=~`.03~`then~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`2)~J ~`~`~`~`~`~`~`~`return~`'#ffe3df24'~J ~`~`~`~`elseif~`perc~`<=~`.05~`then~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`3)~J ~`~`~`~`~`~`~`~`return~`'#ffe39723'~J ~`~`~`~`elseif~`perc~`<=~`.1~`then~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`4)~J ~`~`~`~`~`~`~`~`return~`'#fffd1300'~J ~`~`~`~`else~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`5)~J ~`~`~`~`~`~`~`~`return~`'#fffd00b2'~J ~`~`~`~`end~J end~J ~J ~J icon:registerTriggerFunction(function()~J ~`~`~`~`~`~`~`~`local~`next_stagger,~`next_normalized,~`next_health,~`next_tick,~`next_color~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`not~`BrewmasterTools~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`next_normalized~`=~`UnitStagger'player'~J ~`~`~`~`~`~`~`~`~`~`~`~`next_tick~`=~`next_normalized~J ~`~`~`~`~`~`~`~`else~J ~`~`~`~`~`~`~`~`~`~`~`~`next_normalized~`=~`BrewmasterTools.GetNormalStagger()~J ~`~`~`~`~`~`~`~`~`~`~`~`next_tick~`=~`BrewmasterTools.GetNextTick()~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`next_health~`~`=~`UnitHealthMax'player'~`~`~`~`~J ~`~`~`~`~`~`~`~`next_stagger~`=~`UnitStagger'player'~J ~`~`~`~`~`~`~`~`next_color~`~`~`=~`getColor(next_tick,~`next_health)~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`(next_health~`==~`health~`and~`next_stagger~`==~`stagger~`and~`next_normalized~`==~`normalized~`and~`next_tick~`==~`tick~`and~`next_color~`==~`color)~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`return~`false~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`icon:setMaxValue(next_normalized)~J ~`~`~`~`~`~`~`~`icon:setCurrentValue(next_stagger)~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_progress",~`next_stagger~`/~`next_normalized~`*~`100)~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("next_stagger",~`next_tick/next_health~`*~`100)~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`TMW_ST:SetScriptText("StaggerText",("%.1f"):format(100~`*~`next_tick/next_health))~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`stagger~`=~`next_stagger~J ~`~`~`~`~`~`~`~`normalized~`=~`next_normalized~J ~`~`~`~`~`~`~`~`health~`=~`next_health~J ~`~`~`~`~`~`~`~`tick~`=~`next_tick~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`(next_color~`~|=~`color)~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`icon:setBarColors(next_color,~`next_color,~`next_color)~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`return~`true~J end)~`~`~`~`~J ~J ~J ~J  ^SEvent^SOnEventsRestored ^t^N2^T ^SType^SAnimations ^SLua^Slocal~`icon~`=~`...~J ~J --Your~`code~`goes~`here:~J ~J local~`stagger=0~J local~`normalized=0~J local~`~`health~`=0~J local~`tick~`=~`0~J local~`color~`=~`""~J ~J TMW_ST:InitCounter("next_stagger",~`0)~J TMW_ST:InitCounter("stagger_level",~`0)~J TMW_ST:InitCounter("stagger_progress",~`0)~J ~J function~`getColor(next_tick,~`health)~J ~`~`~`~`local~`perc~`=~`next_tick/health~J ~`~`~`~`if~`perc~`<=~`.015~`then~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`1)~J ~`~`~`~`~`~`~`~`return~`'#ffa9a9a9'~J ~`~`~`~`elseif~`perc~`<=~`.03~`then~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`2)~J ~`~`~`~`~`~`~`~`return~`'#ffe3df24'~J ~`~`~`~`elseif~`perc~`<=~`.05~`then~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`3)~J ~`~`~`~`~`~`~`~`return~`'#ffe39723'~J ~`~`~`~`elseif~`perc~`<=~`.1~`then~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`4)~J ~`~`~`~`~`~`~`~`return~`'#fffd1300'~J ~`~`~`~`else~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_level",~`5)~J ~`~`~`~`~`~`~`~`return~`'#fffd00b2'~J ~`~`~`~`end~J end~J ~J ~J icon:registerTriggerFunction(function()~J ~`~`~`~`~`~`~`~`local~`next_stagger,~`next_normalized,~`next_health,~`next_tick,~`next_color~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`not~`BrewmasterTools~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`next_normalized~`=~`UnitStagger'player'~J ~`~`~`~`~`~`~`~`~`~`~`~`next_tick~`=~`next_normalized~J ~`~`~`~`~`~`~`~`else~J ~`~`~`~`~`~`~`~`~`~`~`~`next_normalized~`=~`BrewmasterTools.GetNormalStagger()~J ~`~`~`~`~`~`~`~`~`~`~`~`next_tick~`=~`BrewmasterTools.GetNextTick()~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`next_health~`~`=~`UnitHealthMax'player'~`~`~`~`~J ~`~`~`~`~`~`~`~`next_stagger~`=~`UnitStagger'player'~J ~`~`~`~`~`~`~`~`next_color~`~`~`=~`getColor(next_tick,~`next_health)~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`(next_health~`==~`health~`and~`next_stagger~`==~`stagger~`and~`next_normalized~`==~`normalized~`and~`next_tick~`==~`tick~`and~`next_color~`==~`color)~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`return~`false~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`icon:setMaxValue(next_normalized)~J ~`~`~`~`~`~`~`~`icon:setCurrentValue(next_stagger)~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("stagger_progress",~`next_stagger~`/~`next_normalized~`*~`100)~J ~`~`~`~`~`~`~`~`TMW_ST:UpdateCounter("next_stagger",~`next_tick/next_health~`*~`100)~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`TMW_ST:SetScriptText("StaggerText",("%.1f"):format(100~`*~`next_tick/next_health))~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`stagger~`=~`next_stagger~J ~`~`~`~`~`~`~`~`normalized~`=~`next_normalized~J ~`~`~`~`~`~`~`~`health~`=~`next_health~J ~`~`~`~`~`~`~`~`tick~`=~`next_tick~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`if~`(next_color~`~|=~`color)~`then~J ~`~`~`~`~`~`~`~`~`~`~`~`icon:setBarColors(next_color,~`next_color,~`next_color)~J ~`~`~`~`~`~`~`~`end~J ~`~`~`~`~`~`~`~`~J ~`~`~`~`~`~`~`~`return~`true~J end)~`~`~`~`~J ~J ~J ~J  ^SAnimation^SACTVTNGLOW ^SEvent^SWCSP ^SOnConditionConditions^T ^N1^T ^SType^SCOUNTER ^SOperator^S> ^SLevel^N1 ^SName^Sstagger_level ^t^N2^T ^SType^SCOUNTER ^SOperator^S< ^SLevel^N4 ^SName^Sstagger_level ^t^N3^T ^SType^SCOUNTER ^SOperator^S> ^SLevel^N73 ^SName^Sstagger_progress ^t^N4^T ^SType^SCOUNTER ^SLevel^N4 ^SName^Sstagger_level ^SAndOr^SOR ^t^N5^T ^SType^SCOUNTER ^SOperator^S> ^SLevel^N50 ^SName^Sstagger_progress ^t^N6^T ^SType^SCOUNTER ^SOperator^S> ^SLevel^N4 ^SName^Sstagger_level ^SAndOr^SOR ^t^Sn^N6 ^t^t^Sn^N2 ^t^t^N85009^S~`~| ^Sicon^^